// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: resource_variables.sql

package db

import (
	"context"

	"github.com/google/uuid"
)

const deleteResourceVariable = `-- name: DeleteResourceVariable :exec
DELETE FROM resource_variable
WHERE resource_id = $1 AND key = $2
`

type DeleteResourceVariableParams struct {
	ResourceID uuid.UUID
	Key        string
}

func (q *Queries) DeleteResourceVariable(ctx context.Context, arg DeleteResourceVariableParams) error {
	_, err := q.db.Exec(ctx, deleteResourceVariable, arg.ResourceID, arg.Key)
	return err
}

const deleteResourceVariablesByResourceID = `-- name: DeleteResourceVariablesByResourceID :exec
DELETE FROM resource_variable
WHERE resource_id = $1
`

func (q *Queries) DeleteResourceVariablesByResourceID(ctx context.Context, resourceID uuid.UUID) error {
	_, err := q.db.Exec(ctx, deleteResourceVariablesByResourceID, resourceID)
	return err
}

const getResourceVariable = `-- name: GetResourceVariable :one
SELECT resource_id, key, value, workspace_id
FROM resource_variable
WHERE resource_id = $1 AND key = $2
`

type GetResourceVariableParams struct {
	ResourceID uuid.UUID
	Key        string
}

func (q *Queries) GetResourceVariable(ctx context.Context, arg GetResourceVariableParams) (ResourceVariable, error) {
	row := q.db.QueryRow(ctx, getResourceVariable, arg.ResourceID, arg.Key)
	var i ResourceVariable
	err := row.Scan(
		&i.ResourceID,
		&i.Key,
		&i.Value,
		&i.WorkspaceID,
	)
	return i, err
}

const listResourceVariablesByResourceID = `-- name: ListResourceVariablesByResourceID :many
SELECT resource_id, key, value, workspace_id
FROM resource_variable
WHERE resource_id = $1
`

func (q *Queries) ListResourceVariablesByResourceID(ctx context.Context, resourceID uuid.UUID) ([]ResourceVariable, error) {
	rows, err := q.db.Query(ctx, listResourceVariablesByResourceID, resourceID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ResourceVariable
	for rows.Next() {
		var i ResourceVariable
		if err := rows.Scan(
			&i.ResourceID,
			&i.Key,
			&i.Value,
			&i.WorkspaceID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listResourceVariablesByWorkspaceID = `-- name: ListResourceVariablesByWorkspaceID :many
SELECT resource_id, key, value, workspace_id
FROM resource_variable
WHERE workspace_id = $1
`

func (q *Queries) ListResourceVariablesByWorkspaceID(ctx context.Context, workspaceID uuid.UUID) ([]ResourceVariable, error) {
	rows, err := q.db.Query(ctx, listResourceVariablesByWorkspaceID, workspaceID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ResourceVariable
	for rows.Next() {
		var i ResourceVariable
		if err := rows.Scan(
			&i.ResourceID,
			&i.Key,
			&i.Value,
			&i.WorkspaceID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const upsertResourceVariable = `-- name: UpsertResourceVariable :exec
INSERT INTO resource_variable (resource_id, key, value, workspace_id)
VALUES ($1, $2, $3, $4)
ON CONFLICT (resource_id, key) DO UPDATE
SET value = EXCLUDED.value
`

type UpsertResourceVariableParams struct {
	ResourceID  uuid.UUID
	Key         string
	Value       []byte
	WorkspaceID uuid.UUID
}

func (q *Queries) UpsertResourceVariable(ctx context.Context, arg UpsertResourceVariableParams) error {
	_, err := q.db.Exec(ctx, upsertResourceVariable,
		arg.ResourceID,
		arg.Key,
		arg.Value,
		arg.WorkspaceID,
	)
	return err
}
