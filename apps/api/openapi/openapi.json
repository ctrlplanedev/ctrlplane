{
   "components": {
      "parameters": { },
      "schemas": {
         "CreateWorkspaceRequest": {
            "properties": {
               "name": {
                  "description": "Display name of the workspace",
                  "maxLength": 30,
                  "minLength": 3,
                  "type": "string"
               },
               "slug": {
                  "description": "URL-friendly unique identifier (lowercase, no spaces)",
                  "maxLength": 50,
                  "minLength": 3,
                  "pattern": "^[a-z0-9-]+$",
                  "type": "string"
               }
            },
            "required": [
               "name",
               "slug"
            ],
            "type": "object"
         },
         "Error": {
            "properties": {
               "code": {
                  "description": "Error code",
                  "type": "string"
               },
               "details": {
                  "description": "Additional error details",
                  "type": "object"
               },
               "message": {
                  "description": "Error message",
                  "type": "string"
               }
            },
            "required": [
               "message"
            ],
            "type": "object"
         },
         "UpdateWorkspaceRequest": {
            "properties": {
               "name": {
                  "description": "Display name of the workspace",
                  "maxLength": 30,
                  "minLength": 3,
                  "type": "string"
               },
               "slug": {
                  "description": "URL-friendly unique identifier (lowercase, no spaces)",
                  "maxLength": 50,
                  "minLength": 3,
                  "pattern": "^[a-z0-9-]+$",
                  "type": "string"
               }
            },
            "type": "object"
         },
         "Workspace": {
            "properties": {
               "awsRoleArn": {
                  "description": "AWS IAM role ARN for integrations",
                  "nullable": true,
                  "type": "string"
               },
               "createdAt": {
                  "description": "Timestamp when workspace was created",
                  "format": "date-time",
                  "type": "string"
               },
               "googleServiceAccountEmail": {
                  "description": "Google service account email for integrations",
                  "format": "email",
                  "nullable": true,
                  "type": "string"
               },
               "id": {
                  "description": "Unique identifier for the workspace",
                  "format": "uuid",
                  "type": "string"
               },
               "name": {
                  "description": "Display name of the workspace",
                  "maxLength": 30,
                  "minLength": 3,
                  "type": "string"
               },
               "slug": {
                  "description": "URL-friendly unique identifier",
                  "maxLength": 50,
                  "minLength": 3,
                  "pattern": "^[a-z0-9-]+$",
                  "type": "string"
               }
            },
            "required": [
               "id",
               "name",
               "slug",
               "createdAt"
            ],
            "type": "object"
         },
         "WorkspaceList": {
            "properties": {
               "total": {
                  "description": "Total number of workspaces",
                  "type": "integer"
               },
               "workspaces": {
                  "items": {
                     "$ref": "#/components/schemas/Workspace"
                  },
                  "type": "array"
               }
            },
            "required": [
               "workspaces",
               "total"
            ],
            "type": "object"
         }
      },
      "securitySchemes": {
         "apiKeyAuth": {
            "description": "API key authentication using X-API-Key header",
            "in": "header",
            "name": "X-API-Key",
            "type": "apiKey"
         },
         "bearerAuth": {
            "bearerFormat": "JWT",
            "description": "Session-based authentication using Better Auth",
            "scheme": "bearer",
            "type": "http"
         }
      }
   },
   "info": {
      "description": "OpenAPI schemas for Ctrlplane API",
      "title": "Ctrlplane API",
      "version": "1.0.0"
   },
   "openapi": "3.0.0",
   "paths": {
      "/v1/workspaces": {
         "get": {
            "description": "Get all workspaces accessible to the authenticated user",
            "operationId": "listWorkspaces",
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/WorkspaceList"
                        }
                     }
                  },
                  "description": "List of workspaces"
               },
               "401": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Unauthorized"
               },
               "500": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Internal server error"
               }
            },
            "security": [
               {
                  "bearerAuth": [ ]
               },
               {
                  "apiKeyAuth": [ ]
               }
            ],
            "summary": "List workspaces",
            "tags": [
               "Workspaces"
            ]
         },
         "post": {
            "description": "Create a new workspace and assign creator as owner",
            "operationId": "createWorkspace",
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "$ref": "#/components/schemas/CreateWorkspaceRequest"
                     }
                  }
               },
               "required": true
            },
            "responses": {
               "201": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Workspace"
                        }
                     }
                  },
                  "description": "Workspace created successfully"
               },
               "400": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Invalid request"
               },
               "401": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Unauthorized"
               },
               "409": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Workspace slug already exists"
               },
               "500": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Internal server error"
               }
            },
            "security": [
               {
                  "bearerAuth": [ ]
               },
               {
                  "apiKeyAuth": [ ]
               }
            ],
            "summary": "Create workspace",
            "tags": [
               "Workspaces"
            ]
         }
      },
      "/v1/workspaces/slug/{workspaceSlug}": {
         "get": {
            "description": "Get a specific workspace by its slug",
            "operationId": "getWorkspaceBySlug",
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Workspace"
                        }
                     }
                  },
                  "description": "Workspace details"
               },
               "401": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Unauthorized"
               },
               "404": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Workspace not found"
               },
               "500": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Internal server error"
               }
            },
            "security": [
               {
                  "bearerAuth": [ ]
               },
               {
                  "apiKeyAuth": [ ]
               }
            ],
            "summary": "Get workspace by slug",
            "tags": [
               "Workspaces"
            ]
         },
         "parameters": [
            {
               "description": "Workspace slug",
               "in": "path",
               "name": "workspaceSlug",
               "required": true,
               "schema": {
                  "type": "string"
               }
            }
         ]
      },
      "/v1/workspaces/{workspaceId}": {
         "delete": {
            "description": "Delete a workspace and all associated data",
            "operationId": "deleteWorkspace",
            "responses": {
               "204": {
                  "description": "Workspace deleted successfully"
               },
               "401": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Unauthorized"
               },
               "404": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Workspace not found"
               },
               "500": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Internal server error"
               }
            },
            "security": [
               {
                  "bearerAuth": [ ]
               },
               {
                  "apiKeyAuth": [ ]
               }
            ],
            "summary": "Delete workspace",
            "tags": [
               "Workspaces"
            ]
         },
         "get": {
            "description": "Get a specific workspace by ID",
            "operationId": "getWorkspace",
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Workspace"
                        }
                     }
                  },
                  "description": "Workspace details"
               },
               "401": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Unauthorized"
               },
               "404": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Workspace not found"
               },
               "500": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Internal server error"
               }
            },
            "security": [
               {
                  "bearerAuth": [ ]
               },
               {
                  "apiKeyAuth": [ ]
               }
            ],
            "summary": "Get workspace",
            "tags": [
               "Workspaces"
            ]
         },
         "parameters": [
            {
               "description": "Workspace ID",
               "in": "path",
               "name": "workspaceId",
               "required": true,
               "schema": {
                  "format": "uuid",
                  "type": "string"
               }
            }
         ],
         "patch": {
            "description": "Update workspace properties",
            "operationId": "updateWorkspace",
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "$ref": "#/components/schemas/UpdateWorkspaceRequest"
                     }
                  }
               },
               "required": true
            },
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Workspace"
                        }
                     }
                  },
                  "description": "Workspace updated successfully"
               },
               "400": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Invalid request"
               },
               "401": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Unauthorized"
               },
               "404": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Workspace not found"
               },
               "409": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Workspace slug already exists"
               },
               "500": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Error"
                        }
                     }
                  },
                  "description": "Internal server error"
               }
            },
            "security": [
               {
                  "bearerAuth": [ ]
               },
               {
                  "apiKeyAuth": [ ]
               }
            ],
            "summary": "Update workspace",
            "tags": [
               "Workspaces"
            ]
         }
      }
   },
   "servers": [
      {
         "description": "Development server",
         "url": "http://localhost:3001"
      }
   ]
}
