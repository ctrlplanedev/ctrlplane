# Kubernetes

To install a cloud-native version of Ctrlplane, use the Ctrlplane Helm chart.
This chart contains all the required components to get started and can scale to
large deployments.

## Pre-requisites

- A working Kubernetes cluster
- `kubectl` and `helm` on the client system that you will use to install our
  Helm charts

## Installing Ctrlplane

1. Open Terminal or any other command-line app that has access to Kubernetes
   tools on your local system.

2. Add Helm Repo

   ```bash
   helm repo add ctrlplane https://charts.ctrlplane.Dev
   helm repo update
   ```

3. Install Helm Chart
   ```bash
   helm install ctrlplane ctrlplane/ctrlplane
   ```

## Configuration

### Global settings

To reduce configuration duplication when installing our wrapper Helm chart,
several configuration settings are available to be set in the global section of
values.yaml. These global settings are used across several charts, while all
other settings are scoped within their chart. See the
[Helm documentation](https://helm.sh/docs/chart_template_guide/subcharts_and_globals/#global-chart-values)
on globals for more information on how the global variables work.

#### Configure PostgreSQL settings

```yaml
global:
  psql:
    host: psql.example.com
    port: 5432
    database: ctrlplane
    user: ctrlplane
    password: password
```

| Name       | Type    | Default     | Description                                                     |
| :--------- | :------ | :---------- | :-------------------------------------------------------------- |
| `host`     | String  | `""`        | The hostname of the PostgreSQL server with the database to use. |
| `database` | String  | `""`        | The name of the database to use on the PostgreSQL server.       |
| `port`     | Integer | `5432`      | The port on which to connect to the PostgreSQL server.          |
| `user`     | String  | `ctrlplane` | The username with which to authenticate to the database.        |
| `password` | String  | `ctrlplane` | The password with which to authenticate to the database.        |
