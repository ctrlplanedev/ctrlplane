import { Callout } from "nextra/components";

# Deployments

Deployments are the core component of Ctrlplane, orchestrating the delivery of
your applications across various environments and targets. They encapsulate the
configuration, workflows, and triggers required to automate and manage the
entire release lifecycle.

## Key Components

A Ctrlplane deployment consists of:

- **System:** High-level categorization (e.g., "Microservices," "Data Pipeline")
- **Release:** Specific version or build to be deployed
- **Environments:** Deployment stages (e.g., "Dev," "Staging," "Prod")
- **Targets:** Deployment destinations (e.g., K8s clusters, VM groups, FaaS)
- **Workflows:** Automated tasks executed during deployment
- **Job Agents:** Integrations triggering external CI/CD pipelines
- **Policies (Optional):** Rules governing the deployment process

## Deployment Process

1. **Release Creation:** Initiate a new release with version/build number
2. **Workflow Triggering:** Automatic activation of environment-specific workflows
3. **Job Agent Activation:** Triggers sent to external CI/CD systems
4. **Pipeline Execution:** External systems deploy to specified targets
5. **Status Tracking:** Real-time monitoring of deployment progress

<Callout type="info">
  Best practice: Use a single deployment with a pipeline supporting multiple
  targets, rather than separate deployments for each target.
</Callout>

## Key Benefits

- **Automation:** Minimizes manual intervention and error potential
- **Flexibility:** Supports various deployment strategies and complexities
- **Integration:** Seamless connection with existing CI/CD toolchains
- **Visibility:** Real-time deployment status and progress tracking
- **Control:** Policy enforcement and approval workflows

## Example: Microservices Deployment

Consider a microservices architecture with environments (Dev, Staging, Prod) and
multiple regional Kubernetes clusters. Configure a Ctrlplane deployment with:

1. System: "Microservices Platform"
2. Environments: Dev, Staging, Prod
3. Targets: Regional K8s clusters
4. Job Agents: Configured for GitLab CI/CD
5. Policies: Require approvals for Staging and Prod

When creating a release, Ctrlplane orchestrates:

1. Dev deployment via GitLab CI/CD
2. Staging deployment after approval
3. Production rollout across regions

## Key Takeaways

- Deployments centralize release management across diverse environments and
  systems
- Ctrlplane complements existing CI/CD tools, providing higher-level
  orchestration
- Achieve streamlined, efficient, and reliable deployment processes at scale
